## [旋转（Rotation）](https://codeforces.com/gym/105911/problem/K)

**时间限制：** 1 s
**内存限制：** 256 MB



你有 $n$ 个石像，每个石像都有一个鼻子。每个石像可以面向 $4$ 个方向：**前方、右方、后方或左方**。

每次你可以执行以下操作之一：

- 按下某一个石像的鼻子，会导致 **其他所有石像** 同时顺时针旋转 $90^\circ$；  
- 按下你自己的鼻子，会导致 **所有石像** 同时顺时针旋转 $90^\circ$。

顺时针旋转的顺序是：前方 $\rightarrow$ 右方 $\rightarrow$ 后方 $\rightarrow$ 左方。

你的任务是使 **所有石像都面向前方**，请计算 **所需最少的按压次数**。







### 输入

第一行包含一个整数 $n$（$1 \leq n \leq 10^6$）。

第二行包含 $n$ 个用空格分隔的整数 $a_i$（$a_i \in \{0$，$1$，$2$，$3\}$），表示每个石像当前的朝向。  

其中 $a_i = 0$，$1$，$2$，$3$ 分别表示前方、右方、后方、左方。





### 输出

输出一个整数，表示最少的按压次数。





### 样例

**样例输入：**

```cpp
// 样例输入1
4
0 1 2 3

// 样例输入2
5
0 0 1 2 3
```



**样例输出：**

```cpp
// 样例输出1
6

// 样例输出2
8
```





### 注意

==这题不是多测！！！==

在第一个测试用例中：

先按石像 $1$ 的鼻子 $3$ 次，每个石像的方向变为 $[1$，$1$，$2$，$3]$；

再按石像 $3$ 的鼻子 $1$ 次，每个石像的方向变为 $[2$，$2$，$2$，$0]$；

最后按石像 $4$ 的鼻子 $2$ 次，每个石像的方向变为 $[0$，$0$，$0$，$0]$；





### 题解

解题策略分为两步：先统一朝向，再集体转向。

关键在于对操作一的理解。该操作让其他石像都顺时针旋转 $90^\circ$。相对于整体，其净效应等同于只让被按的那个石像逆时针旋转 $90^\circ$。利用这个 "单体逆时针旋转" 的操作，我们可以将所有石像的朝向调整为一致。

当所有石像的朝向统一后，再使用操作二，将它们作为一个整体顺时针旋转，直到全部面向 "前方"。

因此，我们只需枚举四个方向（前、右、后、左）作为中途的统一目标。分别计算出 "将所有石像统一到该方向的次数" 与 "从该方向集体转向前方的次数" 之和，最终取四个结果中的最小值即可。



```cpp
void solve()
{
    int n, t;
    cin >> n;
    vector<int> nums(4);
    for (int i = 0; i < n; ++i)
       cin >> t, nums[t]++;

    int ans = 1e15;
    for (int i = 0; i < 4; ++i)
    {
       t = 0;
       for (int j = 1; j < 4; ++j)
          t += nums[(i + j) % 4] * j;
       t += (4 - (i + t) % 4) % 4;
       ans = min(ans, t);
    }
    cout << ans << el;
}
```